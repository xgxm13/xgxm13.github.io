{
    "version": "https://jsonfeed.org/version/1",
    "title": "筱何仔 • All posts by \"微信小程序\" category",
    "description": "",
    "home_page_url": "https://blog.mengcodes.com",
    "items": [
        {
            "id": "https://blog.mengcodes.com/Web/Wechat/2021/02/18/1/",
            "url": "https://blog.mengcodes.com/Web/Wechat/2021/02/18/1/",
            "title": "微信小程序swiper高度自适应",
            "date_published": "2021-02-18T08:21:13.000Z",
            "content_html": "<p><span class=\"red\">微信小程序 swiper</span> 高度自适应<br />\n<a id=\"more\"></a><br />\n 微信小程序自带的滑块视图容器 <span class=\"kbd red\">swiper</span> 不能通过设置<span class=\"red\"> height</span> 属性使高度自适应，这就导致我们代码开发中，经常出现子组件 <span class=\"kbd red\">swiper-item</span> 高度不一样的问题，影响页面美观。可以通过下面的方法解决。</p>\n<ul>\n<li>在<span class=\"red\"> data</span> 里 声明 变量<span class=\"red\"> clientHeight</span><br />\n<figure class=\"highlight js\"><figcaption><span>方法</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 第一步</span></span><br><span class=\"line\">data () &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    clientHeight: <span class=\"number\">0</span></span><br><span class=\"line\">    ···</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>页面 <span class=\"kbd red\">swiper</span> 及  <span class=\"kbd red\">scroll-view</span> 添加高度属性<span class=\"red\"> height</span>，高度值为<span class=\"red\"> clientHeight</span><br />\n<figure class=\"highlight js\"><figcaption><span>方法</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 第二步</span></span><br><span class=\"line\">&lt;swiper @change=<span class=\"string\">&quot;changeSwiper&quot;</span> :current=<span class=\"string\">&quot;current&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;swiper&quot;</span> :style=<span class=\"string\">&quot;&#x27;height:&#x27; + clientHeight + &#x27;px&#x27;&quot;</span>&gt;</span><br><span class=\"line\">  &lt;swiper-item v-<span class=\"keyword\">for</span>=<span class=\"string\">&quot;(item, index) in tabsData&quot;</span> :key=<span class=\"string\">&quot;index&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;swiperItem&quot;</span>&gt;</span><br><span class=\"line\">    &lt;scroll-view scroll-y=<span class=\"string\">&quot;true&quot;</span> :style=<span class=\"string\">&quot;&#x27;height:&#x27; + clientHeight + &#x27;px&quot;</span>&gt;</span><br><span class=\"line\">      &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;mainContent&quot;</span>&gt;</span><br><span class=\"line\">        ··· <span class=\"comment\">// 其他代码</span></span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/scroll-view&gt;</span><br><span class=\"line\">  &lt;/swiper-item&gt;</span><br><span class=\"line\">&lt;/swiper&gt;</span><br></pre></td></tr></table></figure></li>\n<li><span class=\"red\">onLoad()</span> 方法中获取高度 使用 <span class=\"red\">wx.getSystemInfo()</span> 方法<br />\n <figure class=\"highlight js\"><figcaption><span>方法</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 第三步</span></span><br><span class=\"line\">onLoad () &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> that = <span class=\"built_in\">this</span></span><br><span class=\"line\">  wx.getSystemInfo(&#123;</span><br><span class=\"line\">    success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">      that.clientHeight = res.windowHeight - <span class=\"number\">44</span> <span class=\"comment\">// 减去44 是因为有 44px 的标题高度</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// wx.getSystemInfo() 成功时的回调如下</span></span><br><span class=\"line\"><span class=\"comment\">// 属性\t类型\t说明</span></span><br><span class=\"line\"><span class=\"comment\">// brand\tstring\t设备品牌</span></span><br><span class=\"line\"><span class=\"comment\">// model\tstring\t设备型号</span></span><br><span class=\"line\"><span class=\"comment\">// pixelRatio\tnumber\t设备像素比</span></span><br><span class=\"line\"><span class=\"comment\">// screenWidth\tnumber\t屏幕宽度，单位px</span></span><br><span class=\"line\"><span class=\"comment\">// screenHeight\tnumber\t屏幕高度，单位px</span></span><br><span class=\"line\"><span class=\"comment\">// windowWidth\tnumber\t可使用窗口宽度，单位px</span></span><br><span class=\"line\"><span class=\"comment\">// windowHeight\tnumber\t可使用窗口高度，单位px</span></span><br><span class=\"line\"><span class=\"comment\">// statusBarHeight\tnumber\t状态栏的高度，单位px</span></span><br><span class=\"line\"><span class=\"comment\">// language\tstring\t微信设置的语言</span></span><br><span class=\"line\"><span class=\"comment\">// version\tstring\t微信版本号</span></span><br><span class=\"line\"><span class=\"comment\">// system\tstring\t操作系统及版本</span></span><br><span class=\"line\"><span class=\"comment\">// platform\tstring\t客户端平台</span></span><br><span class=\"line\"><span class=\"comment\">// fontSizeSetting\tnumber\t用户字体大小（单位px）。以微信客户端「我-设置-通用-字体大小」中的设置为准</span></span><br><span class=\"line\"><span class=\"comment\">// SDKVersion\tstring\t客户端基础库版本</span></span><br><span class=\"line\"><span class=\"comment\">// benchmarkLevel\tnumber\t设备性能等级（仅Android小游戏）。取值为：-2 或 0（该设备无法运行小游戏），-1（性能未知），&gt;=1（设备性能值，该值越高，设备性能越好，目前最高不到50）</span></span><br><span class=\"line\"><span class=\"comment\">// environment\tstring\t小程序当前运行环境</span></span><br></pre></td></tr></table></figure><br />\n<span class=\"label danger\">❤️筱何仔</span></li>\n</ul>\n",
            "tags": [
                "前端",
                "微信小程序"
            ]
        }
    ]
}